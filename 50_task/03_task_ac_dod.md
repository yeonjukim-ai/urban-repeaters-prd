# Task Acceptance Criteria & Definition of Done (DOD)

본 문서는 02_req_to_subtask.md의 Sub-Task들을 기반으로 각 Task의 Acceptance Criteria와 Definition of Done을 정의한 것입니다.

---

## Functional Requirements Tasks

### Task: REQ-FUNC-001 - 학생 검색

- [ ] 검색 쿼리(학생 이름 또는 ID)를 입력받아 Firestore에서 검색할 수 있다
- [ ] 부분 일치 검색이 정상 작동한다 (예: "김" 입력 시 "김철수", "김영희" 모두 검색됨)
- [ ] 검색 결과가 최대 50명까지 제한되어 표시된다
- [ ] 페이지네이션이 정상 작동한다 (page, limit 파라미터 적용)
- [ ] 검색 결과에 studentId, name, classId가 포함된다
- [ ] 전체 검색 결과 수(total)가 응답에 포함된다
- [ ] 빈 검색 쿼리 입력 시 빈 목록을 반환한다
- [ ] 검색 API 응답 시간이 평균 500ms 이내이다 (REQ-NF-005)
- [ ] 인증 토큰이 없거나 만료된 경우 401 Unauthorized를 반환한다
- [ ] Firestore 연결 실패 시 명확한 에러 메시지를 반환한다

### Task: REQ-FUNC-002 - 리포트 생성 요청

- [ ] 학생 ID와 리포트 형식(format: "pdf")을 입력받아 리포트 생성 요청을 처리할 수 있다
- [ ] 리포트 생성 프로세스가 시작되면 즉시 응답한다 (status: "processing")
- [ ] 리포트 생성 요청 시 reportId가 생성되어 반환된다
- [ ] 진행 상태(status)가 응답에 포함된다
- [ ] 존재하지 않는 학생 ID 입력 시 404 Not Found를 반환한다
- [ ] 중복 리포트 생성 요청 시 적절한 에러 메시지를 반환한다
- [ ] Vercel 함수 실행 시간 제한 초과 시 타임아웃 에러를 반환한다
- [ ] 리포트 생성 요청 API 응답 시간이 1초 이내이다

### Task: REQ-FUNC-003 - 출석 데이터 조회

- [ ] 학생 ID로 Firestore `attendance` 컬렉션에서 출석 데이터를 조회할 수 있다
- [ ] 날짜 기준 내림차순으로 정렬된 출석 데이터를 반환한다
- [ ] 전체 기간 출석률을 정확히 계산한다: (출석 일수 / 전체 수업 일수) × 100
- [ ] 최근 4주 출석률을 정확히 계산한다
- [ ] 출석 데이터 배열에 date, isPresent 필드가 포함된다
- [ ] 출석률이 백분율(%) 형식으로 반환된다
- [ ] 학생 ID가 존재하지 않는 경우 빈 배열을 반환한다
- [ ] 출석 데이터가 없는 경우 출석률 0%를 반환한다
- [ ] 출석 데이터 조회 API 응답 시간이 평균 500ms 이내이다 (REQ-NF-005)
- [ ] Firestore 쿼리 실패 시 명확한 에러 메시지를 반환한다

### Task: REQ-FUNC-004 - 학습 시간 데이터 조회

- [ ] 학생 ID로 Firestore `study_time` 컬렉션에서 학습 시간 데이터를 조회할 수 있다
- [ ] 날짜 기준 내림차순으로 정렬된 학습 시간 데이터를 반환한다
- [ ] 일평균 학습 시간을 정확히 계산한다: (전체 학습 시간 합계 / 학습 일수)
- [ ] 주평균 학습 시간을 정확히 계산한다: (전체 학습 시간 합계 / 주 수)
- [ ] 목표 대비 달성률을 정확히 계산한다: (실제 평균 / 목표) × 100
- [ ] 학습 시간 데이터 배열에 date, hours 필드가 포함된다
- [ ] 일평균, 주평균이 시간 단위로 반환된다
- [ ] 목표 대비 달성률이 백분율(%) 형식으로 반환된다
- [ ] 학생 ID가 존재하지 않는 경우 빈 배열을 반환한다
- [ ] 학습 시간 데이터가 없는 경우 평균 0, 달성률 0%를 반환한다
- [ ] 학습 시간 데이터 조회 API 응답 시간이 평균 500ms 이내이다 (REQ-NF-005)

### Task: REQ-FUNC-005 - 모의고사 성적 데이터 조회

- [ ] 학생 ID로 Firestore `mock_exam` 컬렉션에서 모의고사 성적 데이터를 조회할 수 있다
- [ ] 시험 날짜 기준 내림차순으로 정렬된 데이터를 반환한다
- [ ] 최근 5회 모의고사 성적만 필터링하여 반환한다
- [ ] 추이 분석을 수행하여 점수 변화 추세를 계산한다 (상승/하락/유지)
- [ ] 등급 변화를 분석하여 등급 상승/하락을 판단한다
- [ ] 모의고사 성적 배열에 examRound, score, grade, examDate 필드가 포함된다
- [ ] 추이 분석 결과가 응답에 포함된다
- [ ] 등급 변화 정보가 응답에 포함된다
- [ ] 학생 ID가 존재하지 않는 경우 빈 배열을 반환한다
- [ ] 모의고사 데이터가 5회 미만인 경우 존재하는 데이터만 반환한다
- [ ] 모의고사 성적 조회 API 응답 시간이 평균 500ms 이내이다 (REQ-NF-005)

### Task: REQ-FUNC-006 - 과제 완료도 데이터 조회

- [ ] 학생 ID로 Firestore `assignments` 컬렉션에서 과제 완료 데이터를 조회할 수 있다
- [ ] 마감일 기준 내림차순으로 정렬된 과제 데이터를 반환한다
- [ ] 완료율을 정확히 계산한다: (완료한 과제 수 / 전체 과제 수) × 100
- [ ] 미완료 과제 목록을 최대 10개까지 필터링하여 반환한다
- [ ] 과제 데이터 배열에 assignmentName, isCompleted, dueDate 필드가 포함된다
- [ ] 완료율이 백분율(%) 형식으로 반환된다
- [ ] 미완료 과제 목록이 최대 10개로 제한된다
- [ ] 학생 ID가 존재하지 않는 경우 빈 배열을 반환한다
- [ ] 과제 데이터가 없는 경우 완료율 0%를 반환한다
- [ ] 과제 완료도 조회 API 응답 시간이 평균 500ms 이내이다 (REQ-NF-005)

### Task: REQ-FUNC-007 - 반 평균 데이터 계산

- [ ] 학생 ID와 반 ID를 입력받아 반 평균 데이터를 계산할 수 있다
- [ ] 하드코딩된 반 평균값 또는 더미 데이터를 사용한다
- [ ] 학생 데이터와 반 평균 데이터를 비교하여 차이값을 산출한다
- [ ] 반 평균 데이터에 출석률, 학습 시간, 모의고사 성적이 포함된다
- [ ] 학생과의 차이값이 응답에 포함된다
- [ ] 학생 ID가 존재하지 않는 경우 기본값을 반환한다
- [ ] 반 정보가 없는 경우 기본 평균값을 사용한다
- [ ] 반 평균 계산 API 응답 시간이 평균 500ms 이내이다 (REQ-NF-005)

### Task: REQ-FUNC-008 - 인사이트 자동 생성

- [ ] 학생 데이터(출석률, 학습 시간, 모의고사 성적, 과제 완료도)를 입력받아 인사이트를 생성할 수 있다
- [ ] 템플릿 기반 규칙 엔진을 사용하여 인사이트를 생성한다 (LLM 사용 없음)
- [ ] 학습 시간 변화를 분석하여 목표 대비 감소/증가를 판단한다
- [ ] 출석률 변화를 분석하여 하락/상승을 판단한다
- [ ] 성적 변화를 분석하여 향상/하락을 판단한다
- [ ] 최대 3개의 인사이트 텍스트를 생성한다
- [ ] 인사이트 형식이 "최근 N주간 학습 시간이 목표 대비 X% 감소했습니다" 형식을 따른다
- [ ] 학생 데이터가 부족한 경우 기본 인사이트를 반환한다
- [ ] 규칙 엔진 실행 실패 시 빈 배열을 반환한다
- [ ] 인사이트 생성 처리 시간이 1초 이내이다

### Task: REQ-FUNC-009 - 리포트 PDF 생성

- [ ] 리포트 데이터(학생 정보, 출석률, 학습 시간, 모의고사 성적, 과제 완료도, 인사이트)를 입력받아 PDF를 생성할 수 있다
- [ ] 리포트 템플릿(HTML/CSS)을 사용하여 리포트를 렌더링한다
- [ ] PDF 생성 라이브러리(puppeteer, pdfkit 등)를 사용하여 PDF를 생성한다
- [ ] A4 용지 기준의 PDF 파일이 생성된다
- [ ] 기본 정보, 그래프 및 차트가 PDF에 포함된다
- [ ] Firebase Storage에 PDF 파일이 저장된다
- [ ] 다운로드 URL이 생성되어 반환된다
- [ ] 리포트 데이터가 부족한 경우 명확한 에러 메시지를 반환한다
- [ ] PDF 생성 실패 시 명확한 에러 메시지를 반환한다
- [ ] Firebase Storage 저장 실패 시 명확한 에러 메시지를 반환한다
- [ ] PDF 생성 시간이 30초 이내에 완료된다 (REQ-NF-001, REQ-NF-028)
- [ ] Vercel 함수 실행 시간 제한 내에 완료되거나 비동기 처리로 전환된다

### Task: REQ-FUNC-011 - 리포트 생성 시간 제한

- [ ] 리포트 생성 시작 시간을 기록한다
- [ ] 리포트 생성 프로세스 실행 중 경과 시간을 모니터링한다
- [ ] 30초 경과 시 리포트 생성을 중단하고 실패 상태로 처리한다
- [ ] 시간 초과 시 사용자에게 명확한 에러 메시지를 표시한다 ("리포트 생성 시간이 30초를 초과했습니다")
- [ ] Vercel Hobby 플랜 사용 시 10초 제한을 적용하거나 비동기 처리로 전환한다
- [ ] 비동기 처리 시 큐 시스템으로 전환하여 백그라운드에서 처리한다
- [ ] 시간 제한 모니터링이 정확히 작동한다 (1초 단위 이하 오차)

### Task: REQ-FUNC-012 - 리포트 다운로드

- [ ] 리포트 ID를 입력받아 Firestore에서 리포트 정보를 조회할 수 있다
- [ ] Firebase Storage에서 PDF 파일 다운로드 URL을 생성할 수 있다
- [ ] 다운로드 가능한 URL을 반환한다
- [ ] PDF 파일(바이너리)을 다운로드할 수 있다
- [ ] 리포트 ID가 존재하지 않는 경우 404 Not Found를 반환한다
- [ ] Firebase Storage 파일이 없는 경우 404 Not Found를 반환한다
- [ ] 인증 토큰이 없거나 만료된 경우 401 Unauthorized를 반환한다
- [ ] 다운로드 URL이 유효한 기간 내에 작동한다
- [ ] 리포트 다운로드 API 응답 시간이 평균 500ms 이내이다 (REQ-NF-005)

### Task: REQ-FUNC-013 - 리포트 생성 이력 저장

- [ ] 리포트 ID, 학생 ID, 생성 시간, 리포트 유형, 다운로드 여부를 입력받아 이력을 저장할 수 있다
- [ ] Firestore `reports` 컬렉션에 리포트 생성 이력이 저장된다
- [ ] 리포트 정보 문서가 생성/업데이트된다
- [ ] 저장 완료 확인이 반환된다
- [ ] Firestore 저장 실패 시 명확한 에러 메시지를 반환한다
- [ ] 필수 필드 누락 시 검증 에러를 반환한다
- [ ] 리포트 생성 이력 저장이 1초 이내에 완료된다

### Task: REQ-FUNC-015 - 파일 업로드 데이터 수집

- [ ] CSV/Excel 파일(최대 50MB)을 업로드받을 수 있다
- [ ] 시스템 유형(systemType: attendance, study_time, mock_exam, payment)을 입력받을 수 있다
- [ ] 파일 형식을 검증한다 (CSV, .xlsx, .xls)
- [ ] 파일 크기를 검증한다 (최대 50MB)
- [ ] 파일 파싱 라이브러리(papaparse, xlsx)를 사용하여 파일을 파싱한다
- [ ] 데이터를 추출한다
- [ ] 데이터 검증을 수행한다 (REQ-FUNC-018 참조)
- [ ] 업로드 ID(uploadId)를 생성하여 반환한다
- [ ] 업로드 상태(status)를 반환한다
- [ ] 검증 실패 시 오류 항목 배열(errors)을 반환한다
- [ ] 파일 형식이 지원되지 않는 경우 400 Bad Request를 반환한다
- [ ] 파일 크기가 50MB를 초과하는 경우 400 Bad Request를 반환한다
- [ ] 파일 파싱 실패 시 명확한 에러 메시지를 반환한다
- [ ] Vercel 함수 페이로드 제한 초과 시 클라이언트 측 파싱을 안내한다
- [ ] 파일 업로드 처리 시간이 10초 이내에 완료된다 (50MB 파일 기준)

### Task: REQ-FUNC-016 - 수동 데이터 입력

- [ ] 시스템 유형(systemType)과 데이터 객체를 입력받을 수 있다
- [ ] 데이터 검증을 수행한다 (REQ-FUNC-018 참조)
- [ ] Firestore에 데이터를 즉시 저장한다
- [ ] 실시간 저장 완료 확인을 반환한다
- [ ] 저장 완료 상태(status)를 반환한다
- [ ] 데이터 검증 실패 시 검증 오류 메시지를 반환한다
- [ ] Firestore 저장 실패 시 명확한 에러 메시지를 반환한다
- [ ] 필수 필드 누락 시 검증 에러를 반환한다
- [ ] 수동 데이터 입력 API 응답 시간이 평균 500ms 이내이다 (REQ-NF-005)

### Task: REQ-FUNC-018 - 데이터 검증

- [ ] 데이터 객체 또는 배열과 시스템 유형(systemType)을 입력받아 검증할 수 있다
- [ ] 필수 필드 존재 여부를 확인한다
- [ ] 데이터 타입을 검증한다 (string, number, boolean, date 등)
- [ ] 날짜 범위를 검증한다
- [ ] 값 범위를 검증한다 (점수 범위, 시간 범위 등)
- [ ] 검증 라이브러리(Joi, Zod 등)를 사용하여 검증한다
- [ ] 검증 결과(성공/실패)를 반환한다
- [ ] 검증 실패 시 검증 오류 메시지 배열을 반환한다
- [ ] 필수 필드 누락 시 검증 오류를 반환한다
- [ ] 데이터 타입 불일치 시 검증 오류를 반환한다
- [ ] 값 범위 초과 시 검증 오류를 반환한다
- [ ] 검증 메시지가 명확하고 이해하기 쉽다 (REQ-NF-018)
- [ ] 데이터 검증 처리 시간이 1초 이내이다

### Task: REQ-FUNC-019 - 데이터 통합

- [ ] 여러 시스템에서 수집된 데이터(attendance, study_time, mock_exam, payment)를 입력받을 수 있다
- [ ] 학생 ID를 기준으로 데이터를 그룹핑한다
- [ ] Firestore 배치 쓰기를 사용하여 데이터를 저장한다
- [ ] `attendance` 컬렉션에 출석 데이터를 저장한다
- [ ] `study_time` 컬렉션에 학습 시간 데이터를 저장한다
- [ ] `mock_exam` 컬렉션에 모의고사 성적 데이터를 저장한다
- [ ] `payment` 컬렉션에 결제 데이터를 저장한다 (선택)
- [ ] 통합 완료 상태를 반환한다
- [ ] 저장된 데이터 개수를 반환한다
- [ ] 학생 ID가 존재하지 않는 경우 해당 데이터를 건너뛴다
- [ ] Firestore 배치 쓰기 실패 시 부분 실패를 처리한다
- [ ] 중복 데이터를 업데이트하거나 건너뛴다
- [ ] 데이터 통합 정확도가 99% 이상이다 (REQ-NF-007)
- [ ] 데이터 통합 처리 시간이 학원당 평균 2분 이내이다

### Task: REQ-FUNC-021 - 통합 대시보드 표시

- [ ] 기간 정보(period: daily, weekly, monthly)를 입력받아 대시보드 데이터를 조회할 수 있다
- [ ] Firestore에서 기간별 데이터를 조회한다
- [ ] 출석률을 집계한다
- [ ] 학습 시간을 집계한다
- [ ] 모의고사 성적을 집계한다
- [ ] 결제 현황을 집계한다
- [ ] 테이블 형태로 데이터를 구성한다
- [ ] 통합 대시보드 데이터 객체를 반환한다 (attendance, studyTime, mockExam, payment 포함)
- [ ] 데이터가 없는 경우 빈 데이터를 반환한다
- [ ] Firestore 쿼리 실패 시 명확한 에러 메시지를 반환한다
- [ ] 통합 대시보드 조회 API 응답 시간이 평균 500ms 이내이다 (REQ-NF-005)

### Task: REQ-FUNC-028 - 리포트 전송 이력 저장

- [ ] 리포트 ID, 학생 ID, 학부모 이메일, 전송 시간, 전송 성공/실패 여부를 입력받아 이력을 저장할 수 있다
- [ ] Firestore `report_delivery` 컬렉션에 리포트 전송 이력이 저장된다
- [ ] 전송 이력 문서가 생성된다
- [ ] 저장 완료 확인이 반환된다
- [ ] Firestore 저장 실패 시 명확한 에러 메시지를 반환한다
- [ ] 필수 필드 누락 시 검증 에러를 반환한다
- [ ] 리포트 전송 이력 저장이 1초 이내에 완료된다

### Task: REQ-FUNC-036 - 사용자 인증

- [ ] 이메일과 비밀번호를 입력받아 인증을 수행할 수 있다
- [ ] 이메일/비밀번호를 검증한다
- [ ] 사용자 정보를 조회한다 (Firestore 또는 Firebase Authentication)
- [ ] 비밀번호를 검증한다 (bcrypt 또는 Firebase Auth)
- [ ] JWT 토큰을 생성한다 (또는 Firebase Auth 토큰)
- [ ] 인증 성공 시 JWT 토큰과 사용자 정보 객체를 반환한다
- [ ] 인증 실패 시 명확한 에러 메시지를 반환한다
- [ ] 이메일이 존재하지 않는 경우 인증 실패 에러를 반환한다
- [ ] 비밀번호가 일치하지 않는 경우 인증 실패 에러를 반환한다
- [ ] 인증 서비스 장애 시 500 Internal Server Error를 반환한다
- [ ] JWT 토큰 유효기간이 24시간이다 (REQ-NF-014)
- [ ] 사용자 인증 API 응답 시간이 평균 500ms 이내이다 (REQ-NF-005)
- [ ] 비밀번호가 암호화되어 저장된다 (REQ-NF-013)

### Task: REQ-FUNC-037 - 기본 접근 제어

- [ ] JWT 토큰(또는 Firebase Auth 토큰)과 요청 엔드포인트를 입력받아 접근을 제어할 수 있다
- [ ] JWT 토큰을 검증한다 (또는 Firebase Auth 토큰 검증)
- [ ] 토큰 유효성을 확인한다
- [ ] 로그인된 사용자를 확인한다
- [ ] 모든 로그인된 사용자에게 동일한 권한을 부여한다 (역할 구분 없음)
- [ ] 인증 성공 시 요청 처리를 계속한다
- [ ] 인증 실패 시 401 Unauthorized를 반환한다
- [ ] 토큰이 없는 경우 401 Unauthorized를 반환한다
- [ ] 토큰이 만료된 경우 401 Unauthorized를 반환한다
- [ ] 토큰이 무효한 경우 401 Unauthorized를 반환한다
- [ ] 접근 제어 검증 시간이 100ms 이내이다

### Task: REQ-FUNC-038 - 리포트 템플릿 기본 설정

- [ ] 리포트 데이터와 기본 템플릿 파일을 입력받아 템플릿을 적용할 수 있다
- [ ] 기본 리포트 템플릿을 로드한다
- [ ] 리포트 데이터를 템플릿에 적용한다
- [ ] 템플릿을 렌더링한다 (커스터마이징 제외)
- [ ] 렌더링된 리포트(HTML)를 반환한다
- [ ] 템플릿 파일이 없는 경우 명확한 에러 메시지를 반환한다
- [ ] 템플릿 렌더링 실패 시 명확한 에러 메시지를 반환한다
- [ ] 템플릿 렌더링 시간이 1초 이내이다

### Task: REQ-FUNC-041 - 수동 리포트 이메일 전송

- [ ] 리포트 ID, 학부모 이메일 주소를 입력받아 이메일을 전송할 수 있다
- [ ] Firestore에서 리포트 정보를 조회한다
- [ ] Firebase Storage에서 리포트 PDF를 다운로드한다
- [ ] 이메일 서비스 API(Resend, SendGrid 등)를 호출한다
- [ ] 리포트 PDF를 이메일 첨부한다
- [ ] 이메일 전송 요청을 수행한다
- [ ] 리포트 전송 이력을 저장한다 (REQ-FUNC-028)
- [ ] 전송 완료 상태(deliveryId, status)를 반환한다
- [ ] 리포트 ID가 존재하지 않는 경우 404 Not Found를 반환한다
- [ ] Firebase Storage 파일이 없는 경우 404 Not Found를 반환한다
- [ ] 이메일 전송 실패 시 명확한 에러 메시지를 반환한다
- [ ] 이메일 서비스 API 장애 시 500 Internal Server Error를 반환한다
- [ ] 이메일 전송 처리 시간이 5초 이내에 완료된다

---

## Non-Functional Requirements Tasks

### Task: REQ-NF-001 - 리포트 생성 성능 (30초 이내 완료)

- [ ] 리포트 생성 요청 시 시작 시간을 기록한다
- [ ] 리포트 생성 프로세스 실행 중 경과 시간을 모니터링한다
- [ ] 리포트 생성이 30초 이내에 완료된다
- [ ] Vercel Hobby 플랜 사용 시 비동기 처리 또는 큐 시스템을 고려한다
- [ ] 성능 메트릭(생성 시간)을 기록한다
- [ ] 30초 초과 시 실패 처리하거나 비동기 처리로 전환한다
- [ ] 리포트 생성 시간이 측정 가능한 형태로 로깅된다
- [ ] 리포트 생성 속도 달성률이 95% 이상이다 (REQ-NF-033)

### Task: REQ-NF-004 - 동시 리포트 생성 처리 (최대 10건)

- [ ] 동시 리포트 생성 요청 수를 모니터링한다
- [ ] 최대 10건까지 동시 처리를 지원한다
- [ ] 초과 요청은 대기열에 추가한다
- [ ] 순차 처리 또는 큐 시스템을 사용한다
- [ ] 처리 완료된 리포트를 반환한다
- [ ] 대기 중인 요청 상태를 반환한다
- [ ] 동시 요청이 10건을 초과하는 경우 대기열에 추가한다
- [ ] 큐 시스템 장애 시 명확한 에러 메시지를 반환한다
- [ ] 동시 처리 모니터링이 정확히 작동한다

### Task: REQ-NF-005 - API 응답 시간 (평균 500ms 이내)

- [ ] API 요청 시 시작 시간을 기록한다
- [ ] API 요청 처리 중 경과 시간을 측정한다
- [ ] 평균 응답 시간이 500ms 이내이다 (리포트 생성 제외)
- [ ] Firestore 쿼리를 최적화한다
- [ ] API 응답 시간 메트릭을 기록한다
- [ ] 응답 시간이 500ms를 초과하는 경우 성능 경고를 로깅한다
- [ ] Firestore 쿼리 지연 시 쿼리 최적화를 수행한다
- [ ] API 응답 시간이 측정 가능한 형태로 모니터링된다

### Task: REQ-NF-006 - 시스템 가동률 (95% 이상)

- [ ] 시스템 상태 모니터링 데이터를 수집한다
- [ ] 시스템 가동 시간을 측정한다
- [ ] 다운타임을 추적한다
- [ ] 연간 가동률이 95% 이상을 유지한다 (계획된 유지보수 시간 제외)
- [ ] Vercel 가동률에 의존한다
- [ ] 시스템 가동률 메트릭을 기록한다
- [ ] 시스템 다운타임 발생 시 모니터링 알림을 전송한다
- [ ] Vercel 서비스 장애 시 외부 의존성 장애를 처리한다
- [ ] 시스템 가동률이 측정 가능한 형태로 모니터링된다

### Task: REQ-NF-007 - 데이터 통합 정확도 (99% 이상)

- [ ] 원천 데이터와 통합된 데이터를 비교한다
- [ ] 데이터 일치율을 계산한다
- [ ] 데이터 정확도가 99% 이상이다
- [ ] Firestore 트랜잭션을 사용한다 (고려)
- [ ] 데이터 정확도 메트릭을 기록한다
- [ ] 데이터 불일치 발생 시 오류를 로깅하고 알림을 전송한다
- [ ] 통합 실패 시 재시도하거나 수동 처리를 안내한다
- [ ] 데이터 정확도가 측정 가능한 형태로 모니터링된다

### Task: REQ-NF-008 - 리포트 생성 성공률 (90% 이상)

- [ ] 리포트 생성 요청과 성공/실패 결과를 추적한다
- [ ] 리포트 생성 성공률을 계산한다
- [ ] 리포트 생성 성공률이 90% 이상이다
- [ ] 실패 원인을 분석한다
- [ ] Vercel 함수 실패를 처리한다
- [ ] 리포트 생성 성공률 메트릭을 기록한다
- [ ] 리포트 생성 실패 시 에러를 로깅하고 재시도를 고려한다
- [ ] 성공률이 90% 미만인 경우 원인을 분석하고 개선한다
- [ ] 리포트 생성 성공률이 측정 가능한 형태로 모니터링된다

### Task: REQ-NF-011 - 동시 사용자 지원 (최대 20명)

- [ ] 동시 사용자 수를 모니터링한다
- [ ] 최대 20명의 동시 사용자를 지원한다
- [ ] Vercel 동시 실행 제한을 고려한다
- [ ] 동시 사용자 수 메트릭을 기록한다
- [ ] 동시 사용자 수가 20명을 초과하는 경우 성능 저하 또는 대기를 처리한다
- [ ] Vercel 동시 실행 제한 초과 시 큐 시스템을 사용한다
- [ ] 동시 사용자 수가 측정 가능한 형태로 모니터링된다

### Task: REQ-NF-012 - 학생 데이터 지원 (학원당 최대 500명)

- [ ] 학생 데이터와 학원 ID를 입력받아 처리할 수 있다
- [ ] 학원당 학생 수 제한을 최대 500명으로 설정한다
- [ ] Firestore 쿼리를 최적화한다
- [ ] 대용량 데이터를 처리한다
- [ ] 학생 데이터(최대 500명)를 반환한다
- [ ] 학생 수가 500명을 초과하는 경우 제한 알림을 표시한다
- [ ] 쿼리 성능 저하 시 인덱스를 최적화한다
- [ ] 500명 데이터 처리 성능이 요구사항을 만족한다

### Task: REQ-NF-013 - 데이터 암호화 (비밀번호 암호화 저장)

- [ ] 사용자 비밀번호(평문)를 입력받아 암호화한다
- [ ] 비밀번호를 암호화한다 (bcrypt 또는 Firebase Auth)
- [ ] 암호화된 비밀번호를 저장한다
- [ ] Firestore에 암호화된 형태로 저장한다
- [ ] 암호화된 비밀번호를 반환한다
- [ ] 암호화 실패 시 명확한 에러 메시지를 반환한다
- [ ] 저장 실패 시 명확한 에러 메시지를 반환한다
- [ ] 암호화 알고리즘이 안전하다 (bcrypt salt rounds ≥ 10)
- [ ] 암호화 검증 테스트를 통과한다

### Task: REQ-NF-014 - 인증 토큰 유효기간 (24시간)

- [ ] JWT 토큰과 토큰 생성 시간을 입력받아 검증할 수 있다
- [ ] JWT 토큰 생성 시 만료 시간을 24시간으로 설정한다
- [ ] 토큰 검증 시 만료 시간을 확인한다
- [ ] 만료된 토큰을 거부한다
- [ ] 유효한 토큰 또는 만료 에러를 반환한다
- [ ] 토큰 만료 시 401 Unauthorized를 반환하고 재로그인을 요구한다
- [ ] 토큰 무효 시 401 Unauthorized를 반환한다
- [ ] 토큰 유효기간이 정확히 24시간이다
- [ ] 토큰 만료 테스트를 통과한다

### Task: REQ-NF-015 - HTTPS 통신 (모든 통신은 HTTPS 사용)

- [ ] HTTP 요청을 입력받아 HTTPS로 리다이렉트한다
- [ ] 모든 HTTP 요청을 HTTPS로 리다이렉트한다
- [ ] HTTPS 통신을 강제한다
- [ ] Vercel 기본 제공 HTTPS를 활용한다
- [ ] HTTPS 통신을 반환한다
- [ ] HTTP 요청 시 HTTPS로 리다이렉트한다
- [ ] SSL 인증서 문제 시 에러를 처리한다
- [ ] 모든 통신이 HTTPS를 사용한다 (100%)
- [ ] HTTPS 통신 검증 테스트를 통과한다

### Task: REQ-NF-016 - 개인정보 보호 (학생 및 학부모 개인정보 암호화 저장)

- [ ] 학생 및 학부모 개인정보(이름, 이메일, 전화번호)를 입력받아 암호화한다
- [ ] 개인정보를 암호화한다
- [ ] Firestore에 암호화된 형태로 저장한다
- [ ] Firestore 보안 규칙을 적용한다
- [ ] 암호화된 개인정보를 반환한다
- [ ] 암호화 실패 시 명확한 에러 메시지를 반환한다
- [ ] 저장 실패 시 명확한 에러 메시지를 반환한다
- [ ] 모든 개인정보 필드가 암호화되어 저장된다
- [ ] 개인정보 암호화 검증 테스트를 통과한다

### Task: REQ-NF-017 - 사용자 가이드 (온라인 도움말 제공)

- [ ] 사용자 가이드 요청을 입력받아 도움말을 제공할 수 있다
- [ ] 주요 기능에 대한 온라인 도움말을 제공한다
- [ ] 도움말 페이지/모달을 표시한다
- [ ] 도움말 콘텐츠를 반환한다
- [ ] 도움말 콘텐츠가 없는 경우 기본 도움말을 표시한다
- [ ] 도움말 접근성이 양호하다 (3클릭 이내 접근)
- [ ] 도움말 콘텐츠가 명확하고 이해하기 쉽다
- [ ] 도움말 접근성 테스트를 통과한다

### Task: REQ-NF-018 - 에러 메시지 (명확하고 이해하기 쉬운 에러 메시지)

- [ ] 에러 발생 상황을 입력받아 에러 메시지를 생성한다
- [ ] 에러 타입을 식별한다
- [ ] 사용자 친화적인 에러 메시지를 생성한다
- [ ] 명확하고 이해하기 쉬운 메시지를 표시한다
- [ ] 에러 메시지(사용자 친화적)를 반환한다
- [ ] 에러 메시지 생성 실패 시 기본 에러 메시지를 표시한다
- [ ] 모든 에러 메시지가 명확하고 이해하기 쉽다
- [ ] 에러 메시지 검증 테스트를 통과한다

### Task: REQ-NF-019 - 반응형 웹 디자인 (모바일 기기 지원)

- [ ] 웹 페이지 요청과 디바이스 정보를 입력받아 반응형 페이지를 제공한다
- [ ] 반응형 웹 디자인을 적용한다
- [ ] 모바일 기기에서 사용 가능한 레이아웃을 제공한다
- [ ] 미디어 쿼리를 사용한다
- [ ] 반응형 웹 페이지를 반환한다
- [ ] 모바일 브라우저 호환성 문제 시 폴백을 처리한다
- [ ] 주요 브라우저(Chrome, Edge, Safari)에서 정상 작동한다
- [ ] 모바일 호환성 테스트를 통과한다

### Task: REQ-NF-020 - 로깅 (모든 주요 이벤트 로깅)

- [ ] 주요 이벤트(리포트 생성, 데이터 업로드 등)를 입력받아 로깅한다
- [ ] 모든 주요 이벤트를 로깅한다
- [ ] Vercel 로그 또는 Firebase 로깅을 사용한다
- [ ] 로그 레벨을 설정한다 (info, error, warn 등)
- [ ] 로그 파일/스트림을 생성한다
- [ ] 로깅 실패 시 에러를 처리한다 (로깅 실패는 시스템에 영향 없도록)
- [ ] 모든 주요 이벤트가 로깅된다 (100%)
- [ ] 로깅 검증 테스트를 통과한다

### Task: REQ-NF-022 - 브라우저 지원 (Chrome, Edge, Safari 최신 2개 버전)

- [ ] 브라우저 요청과 User-Agent 정보를 입력받아 호환성을 확인한다
- [ ] 브라우저 호환성을 확인한다
- [ ] Chrome, Edge, Safari 최신 2개 버전을 지원한다
- [ ] 호환되지 않는 브라우저를 처리한다
- [ ] 호환되는 웹 페이지 또는 호환성 경고를 반환한다
- [ ] 호환되지 않는 브라우저 시 경고 메시지를 표시한다
- [ ] 지원 브라우저에서 정상 작동한다 (100%)
- [ ] 브라우저 호환성 테스트를 통과한다

### Task: REQ-NF-023 - 파일 형식 지원 (CSV, Excel .xlsx, .xls)

- [ ] 업로드된 파일을 입력받아 형식을 검증한다
- [ ] 파일 형식을 검증한다 (CSV, .xlsx, .xls)
- [ ] 파일 파싱 라이브러리를 사용한다
- [ ] 지원되지 않는 형식을 거부한다
- [ ] 파싱된 데이터 또는 형식 오류 메시지를 반환한다
- [ ] 지원되지 않는 파일 형식 시 400 Bad Request를 반환한다
- [ ] 파일 파싱 실패 시 명확한 에러 메시지를 반환한다
- [ ] 지원 파일 형식이 정상적으로 파싱된다 (100%)
- [ ] 파일 형식 테스트를 통과한다

### Task: REQ-NF-024 - 파일 업로드 크기 제한 (최대 50MB)

- [ ] 업로드된 파일과 파일 크기를 입력받아 검증한다
- [ ] 파일 크기를 검증한다 (최대 50MB)
- [ ] Vercel 함수 제한을 고려한다 (클라이언트 측 파싱 또는 청크 업로드)
- [ ] 파일 업로드 성공 또는 크기 제한 오류를 반환한다
- [ ] 파일 크기가 50MB를 초과하는 경우 400 Bad Request를 반환한다
- [ ] Vercel 함수 페이로드 제한 초과 시 클라이언트 측 파싱을 안내한다
- [ ] 50MB 이하 파일이 정상적으로 업로드된다
- [ ] 파일 크기 제한 테스트를 통과한다

### Task: REQ-NF-025 - 리포트 생성 대상 제한 (한 번에 최대 100명)

- [ ] 리포트 생성 요청(학생 ID 배열)을 입력받아 검증한다
- [ ] 리포트 생성 대상 수를 검증한다 (최대 100명)
- [ ] 초과 시 에러 또는 비동기 처리를 수행한다
- [ ] 비동기 처리 또는 큐 시스템을 사용한다
- [ ] 리포트 생성 요청 수락 또는 제한 오류를 반환한다
- [ ] 리포트 생성 대상이 100명을 초과하는 경우 400 Bad Request 또는 비동기 처리를 수행한다
- [ ] 큐 시스템 장애 시 명확한 에러 메시지를 반환한다
- [ ] 100명 이하 대상이 정상적으로 처리된다
- [ ] 리포트 생성 대상 제한 테스트를 통과한다

### Task: REQ-NF-028 - 실행 시간 제한 (리포트 생성 30초)

- [ ] 리포트 생성 요청과 시작 시간을 입력받아 시간을 모니터링한다
- [ ] 리포트 생성 프로세스를 실행한다
- [ ] 실행 시간을 모니터링한다
- [ ] 30초 초과 시 실패 처리를 수행한다
- [ ] Vercel Hobby 플랜 사용 시 비동기 처리 또는 큐 시스템을 고려한다
- [ ] 리포트 생성 완료 또는 타임아웃 에러를 반환한다
- [ ] 실행 시간이 30초를 초과하는 경우 실패 처리를 수행한다
- [ ] Vercel 함수 실행 시간 제한 초과 시 비동기 처리로 전환한다
- [ ] 실행 시간 제한이 정확히 작동한다 (1초 단위 이하 오차)
- [ ] 실행 시간 제한 테스트를 통과한다

### Task: REQ-NF-029 - 리포트 제작 시간 절감 (93% 이상)

- [ ] 리포트 제작 시간 데이터(이전: 주 15시간)를 입력받아 추적한다
- [ ] 리포트 제작 시간을 추적한다
- [ ] 리포트 제작 시간을 측정한다
- [ ] 목표: 주 1시간 이하 (93% 이상 절감)
- [ ] 비즈니스 KPI를 측정한다
- [ ] 리포트 제작 시간 메트릭을 기록한다
- [ ] 절감률(93% 이상)을 계산한다
- [ ] 목표 미달성 시 개선 계획을 수립한다
- [ ] 리포트 제작 시간이 주 1시간 이하로 단축된다
- [ ] 절감률이 93% 이상이다
- [ ] 리포트 제작 시간 추적 테스트를 통과한다

### Task: REQ-NF-030 - 데이터 통합 시간 절감 (90% 이상)

- [ ] 데이터 통합 시간 데이터(이전: 주 5시간)를 입력받아 추적한다
- [ ] 데이터 통합 시간을 추적한다
- [ ] 데이터 통합 시간을 측정한다
- [ ] 목표: 주 30분 이하 (90% 이상 절감)
- [ ] 비즈니스 KPI를 측정한다
- [ ] 데이터 통합 시간 메트릭을 기록한다
- [ ] 절감률(90% 이상)을 계산한다
- [ ] 목표 미달성 시 개선 계획을 수립한다
- [ ] 데이터 통합 시간이 주 30분 이하로 단축된다
- [ ] 절감률이 90% 이상이다
- [ ] 데이터 통합 시간 추적 테스트를 통과한다

### Task: REQ-NF-031 - 학부모 만족도(NPS) 향상 (50 → 65 이상)

- [ ] NPS 설문조사 데이터(이전: 50)를 입력받아 측정한다
- [ ] NPS 설문조사를 수행한다
- [ ] NPS 점수를 계산한다
- [ ] 목표: 65 이상 (50에서 향상)
- [ ] 비즈니스 KPI를 측정한다
- [ ] NPS 점수 메트릭(65 이상)을 기록한다
- [ ] 목표 미달성 시 개선 계획을 수립한다
- [ ] NPS 점수가 65 이상이다
- [ ] NPS 설문조사 테스트를 통과한다

### Task: REQ-NF-032 - 재등록률 향상 (70% → 75% 이상)

- [ ] 재등록률 데이터(이전: 70%)를 입력받아 추적한다
- [ ] 재등록률을 추적한다
- [ ] 재등록률을 계산한다
- [ ] 목표: 75% 이상 (70%에서 향상)
- [ ] 비즈니스 KPI를 측정한다
- [ ] 재등록률 메트릭(75% 이상)을 기록한다
- [ ] 목표 미달성 시 개선 계획을 수립한다
- [ ] 재등록률이 75% 이상이다
- [ ] 재등록률 추적 테스트를 통과한다

### Task: REQ-NF-033 - 리포트 생성 속도 달성률 (95% 이상)

- [ ] 리포트 생성 요청과 리포트 생성 완료 시간을 입력받아 측정한다
- [ ] 리포트 생성 속도를 측정한다 (30초 이내)
- [ ] 달성률을 계산한다 (30초 이내 완료 비율)
- [ ] 목표: 95% 이상
- [ ] 비동기 처리 시 완료율 기준으로 측정한다
- [ ] 리포트 생성 속도 달성률 메트릭(95% 이상)을 기록한다
- [ ] 목표 미달성 시 성능 개선 계획을 수립한다
- [ ] 리포트 생성 속도 달성률이 95% 이상이다
- [ ] 리포트 생성 시간 분포 분석 테스트를 통과한다

### Task: REQ-NF-034 - 리포트 정확도 향상 (85% → 99% 이상)

- [ ] 리포트 데이터와 원천 데이터를 입력받아 검증한다
- [ ] 리포트 내용을 검증한다
- [ ] 리포트 정확도를 계산한다
- [ ] 목표: 99% 이상 (85%에서 향상)
- [ ] 데이터 정확도 테스트를 수행한다
- [ ] 리포트 정확도 메트릭(99% 이상)을 기록한다
- [ ] 목표 미달성 시 데이터 검증을 강화한다
- [ ] 리포트 정확도가 99% 이상이다
- [ ] 리포트 내용 검증 테스트를 통과한다

---

## 요약

- **Functional Requirements Tasks**: 21개 Task의 DOD 정의 완료
- **Non-Functional Requirements Tasks**: 24개 Task의 DOD 정의 완료
- **총 Task DOD**: 45개 Task 완료

각 Task의 DOD는 측정 가능한 기준과 성능 목표를 포함하여 체크박스 형태로 정의되었습니다.

